(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{29:function(e,t,r){e.exports=r(63)},40:function(e,t,r){},58:function(e,t,r){},59:function(e,t,r){},60:function(e,t,r){},63:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),s=r(9),o=r(3),l=r(4),c=r(7),u=r(6),i=r(5),m=(r(40),r(27)),v={servers:[],sortedByColumnName:null,isAsc:!1},d=Object(m.a)({name:"servers",initialState:v,reducers:{addServers:function(e,t){e.servers=t.payload},sortServersAsc:function(e,t){e.isAsc=!0,e.sortedByColumnName=t.payload},sortServersDesc:function(e,t){e.isAsc=!1,e.sortedByColumnName=t.payload},logOut:function(e){return v}}}),p=d.actions,h=p.addServers,E=p.sortServersAsc,f=p.sortServersDesc,b=p.logOut,g=d.reducer,O=function(e){return a.a.createElement("tr",{className:"server"},a.a.createElement("td",null,e.name),a.a.createElement("td",null,e.distance))},w=function(){return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M24 3l-12 18-12-18z"}))},S=function(){return a.a.createElement("svg",{className:"cursor-pointer",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M12 17.395l-8.263-12.395h16.525l-8.262 12.395zm0 3.605l12-18h-24l12 18z"}))},y=function(){return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M0 21l12-18 12 18z"}))},j=function(){return a.a.createElement("svg",{className:"cursor-pointer",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M12 6.605l8.263 12.395h-16.526l8.263-12.395zm0-3.605l-12 18h24l-12-18z"}))},k=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"sortServers",value:function(e,t){var r=this.props.servers.slice().sort((function(t,r){return t[e]<r[e]?-1:1}));t||r.reverse(),this.props.addServers(r),t?this.props.sortServersAsc(e):this.props.sortServersDesc(e)}},{key:"render",value:function(){var e=this;return a.a.createElement("table",{className:"servers-table"},a.a.createElement("tbody",null,a.a.createElement("tr",null,["name","distance"].map((function(t,r){return a.a.createElement("th",{key:r},a.a.createElement("div",{className:"servers-table__header capitalize"},t,e.props.sortedByColumnName!==t?a.a.createElement("span",{className:"servers-table__icons"},a.a.createElement("div",{onClick:function(){return e.sortServers(t,!1)}},a.a.createElement(j,null)),a.a.createElement("div",{onClick:function(){return e.sortServers(t,!0)}},a.a.createElement(S,null))):e.props.isAsc?a.a.createElement("span",{className:"servers-table__icons"},a.a.createElement("div",{onClick:function(){return e.sortServers(t,!1)}},a.a.createElement(j,null)),a.a.createElement(w,null)):a.a.createElement("span",{className:"servers-table__icons"},a.a.createElement(y,null),a.a.createElement("div",{onClick:function(){return e.sortServers(t.toLowerCase(),!0)}},a.a.createElement(S,null)))))}))),this.props.servers.map((function(e,t){return a.a.createElement(O,{key:t,name:e.name,distance:e.distance})}))))}}]),r}(a.a.Component);var N=Object(i.b)((function(e){return{servers:e.servers.servers,sortedByColumnName:e.servers.sortedByColumnName,isAsc:e.servers.isAsc}}),(function(e){return{sortServersAsc:function(t){return e(E(t))},sortServersDesc:function(t){return e(f(t))},addServers:function(t){return e(h(t))}}}))(k),C=r(28),_=r(8),L=r.n(_),A="tokens",B="servers";r(58);var D=r(14),x=function(e){var t=Object(n.useState)(""),r=Object(D.a)(t,2),s=r[0],o=r[1],l=Object(n.useState)(""),c=Object(D.a)(l,2),u=c[0],i=c[1];return a.a.createElement("div",{className:"login-form"},a.a.createElement("label",{htmlFor:"name"},"Name"),a.a.createElement("input",{type:"text",name:"username",value:s,onChange:function(t){o(t.target.value),e.resetErrors()}}),a.a.createElement("label",{htmlFor:"password"},"Password"),a.a.createElement("input",{type:"password",name:"password",value:u,onChange:function(t){i(t.target.value),e.resetErrors()}}),a.a.createElement("button",{disabled:0===s.length||0===u.length,type:"submit"},"Login"))},T=function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(o.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={authToken:null,badCredentials:!1,serverError:!1},e.handleSubmit=function(t){t.preventDefault(),e.props.toggleLoader();var r={username:t.target.username.value,password:t.target.password.value};L.a.post(A,Object(C.a)({},r)).then((function(t){e.setState({authToken:t.data.token}),e.fetchServers()})).catch((function(t){var r=401===t.response.status?{badCredentials:!0}:{serverError:!0};e.setState(r),e.props.toggleLoader()}))},e.fetchServers=function(){if(e.state.authToken){var t={headers:{Authorization:e.state.authToken}};L.a.get(B,t).then((function(t){return e.props.addServers(t.data)})).catch((function(){return e.setState({serverError:!0})})).finally((function(){return e.props.toggleLoader()}))}},e.resetErrors=function(){e.setState({badCredentials:!1,serverError:!1})},e}return Object(l.a)(r,[{key:"componentWillUnmount",value:function(){this.setState=function(){}}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("form",{className:this.state.badCredentials?"bad-input":"",onSubmit:this.handleSubmit},a.a.createElement(x,{resetErrors:this.resetErrors}),this.state.badCredentials&&a.a.createElement("p",null,"Login failed: Invalid username or password."),this.state.serverError&&a.a.createElement("p",null,"Server error, please try again later.")))}}]),r}(a.a.Component);var z=Object(i.b)(null,(function(e){return{addServers:function(t){return e(h(t))},toggleLoader:function(t){return e({type:"TOGGLE_LOADER"})}}}))(T),R=(r(59),function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){return a.a.createElement("div",{className:"overlay-background"},a.a.createElement("div",{className:"loader"}))}}]),r}(a.a.Component)),G=(r(60),function(e){Object(c.a)(r,e);var t=Object(u.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){var e=this;return a.a.createElement("div",null,this.props.loader&&a.a.createElement(R,null),0===this.props.servers.length?a.a.createElement(z,null):a.a.createElement("div",null,a.a.createElement("button",{className:"logout-button",onClick:function(){return e.props.logOut()}},"Log out"),a.a.createElement(N,null)))}}]),r}(a.a.Component));var I=Object(i.b)((function(e){return{servers:e.servers.servers,loader:e.loader}}),(function(e){return{logOut:function(t){return e(b(t))}}}))(G),M=r(25),U=r(1),X=r(13),F=r(26),J=r.n(F);var V=Object(U.c)({servers:g,loader:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_LOADER":return!e;default:return e}}}),P={key:"root",storage:J.a,blacklist:["loader"]},W=Object(X.a)(P,V),q=Object(U.e)(W,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),H=Object(X.b)(q);L.a.defaults.baseURL="https://playground.tesonet.lt/v1/",Object(s.render)(a.a.createElement(i.a,{store:q},a.a.createElement(M.a,{loading:null,persistor:H},a.a.createElement(I,null))),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.e8cda43c.chunk.js.map